#!/bin/bash

shopt -s expand_aliases

alias curaEngine='/Applications/Ultimaker\ Cura.app/Contents/MacOS/CuraEngine'
alias openscad='/Applications/OpenSCAD.app/Contents/MacOS/OpenSCAD'
alias sedi="sed -i ''"

mkdir ./bed_leveling

for R in top middle bottom row
do
	for C in left mid right col
    do
      openscad -o "./bed_leveling/$R-$C.stl" -D $R=true -D $C=true bed_leveling.scad
    done
done

cd bed_leveling

for f in *.stl
do
curaEngine slice \
-s machine_end_gcode="; Ender 3 Custom End G-code
G4 ; Wait
M220 S100 ; Reset Speed factor override percentage to default (100%)
M221 S100 ; Reset Extrude factor override percentage to default (100%)
G91 ; Set coordinates to relative
G1 F1800 E-3 ; Retract filament 3 mm to prevent oozing
G1 F3000 Z20 ; Move Z Axis up 20 mm to allow filament ooze freely
G90 ; Set coordinates to absolute
G1 X0 Y235 F1000 ; Move Heat Bed to the front for easy print removal
M84 ; Disable stepper motors
; End of custom end GCode" \
-s machine_start_gcode="M140 S60
M105
M190 S60
M104 S200
M105
M109 S200
G28 ; Home all axes
G92 E0 ; Reset Extruder
G1 Z2.0 F3000 ; Move Z Axis up little to prevent scratching of Heat Bed
G1 F1000 E5 ; extrude filament 5 mm" \
-s conical_overhang_enabled="False" \
-s bridge_fan_speed="100" \
-s jerk_skirt_brim="20" \
-s machine_name="Creality Ender-3" \
-s cool_min_speed="10" \
-s retraction_amount="5" \
-s jerk_wall_x="20" \
-s machine_disallowed_areas="[]" \
-s material_final_print_temperature="195" \
-s support_interface_density="100" \
-s bridge_skin_density="100" \
-s speed_support_interface="40.0" \
-s raft_airgap="0.3" \
-s bridge_wall_coast="100" \
-s acceleration_wall_0="500" \
-s infill="0" \
-s ironing_pattern="zigzag" \
-s z_seam_y="705" \
-s material_print_temperature_layer_0="210" \
-s prime_tower_min_volume="6" \
-s prime_tower_line_width="0.4" \
-s command_line_settings="0" \
-s travel_compensate_overlapping_walls_x_enabled="True" \
-s travel_avoid_other_parts="True" \
-s raft_interface_fan_speed="0" \
-s acceleration_support_bottom="500" \
-s wireframe_roof_drag_along="0.8" \
-s support_initial_layer_line_distance="2.6666666666666665" \
-s roofing_extruder_nr="-1" \
-s support_use_towers="True" \
-s ooze_shield_dist="2" \
-s skin_no_small_gaps_heuristic="False" \
-s support_mesh_drop_down="True" \
-s bridge_skin_density_2="75" \
-s skirt_brim_line_width="0.4" \
-s machine_width="235" \
-s coasting_enable="False" \
-s minimum_interface_area="1.0" \
-s extruder_prime_pos_y="0" \
-s infill_sparse_thickness="0.15" \
-s support_tower_diameter="3.0" \
-s brim_width="8.0" \
-s connect_infill_polygons="False" \
-s slicing_tolerance="middle" \
-s meshfix_union_all_remove_holes="False" \
-s bridge_skin_material_flow="60" \
-s ironing_line_spacing="0.1" \
-s mesh_position_y="0" \
-s material_bed_temperature="60" \
-s speed_wall_x="80" \
-s bridge_settings_enabled="False" \
-s jerk_infill="20" \
-s wireframe_printspeed_bottom="5" \
-s support_pattern="zigzag" \
-s raft_surface_line_width="0.4" \
-s wireframe_flat_delay="0.1" \
-s top_skin_preshrink="0.8" \
-s top_bottom_pattern="lines" \
-s multiple_mesh_overlap="0.15" \
-s wireframe_enabled="False" \
-s shell="0" \
-s roofing_layer_count="0" \
-s machine_nozzle_cool_down_speed="2.0" \
-s support_wall_count="0" \
-s mesh_rotation_matrix="[[1,0,0], [0,1,0], [0,0,1]]" \
-s machine_max_acceleration_z="100" \
-s speed_equalize_flow_enabled="False" \
-s support_interface_skip_height="0.3" \
-s roofing_angles="[ ]" \
-s spaghetti_inset="0.2" \
-s infill_wipe_dist="0.1" \
-s top_skin_expand_distance="0.8" \
-s layer_height_0="0.2" \
-s machine_max_acceleration_y="9000" \
-s raft_jerk="20" \
-s spaghetti_max_height="2.0" \
-s wireframe_flow="100" \
-s support_conical_angle="30" \
-s support_bottom_density="100" \
-s support_conical_enabled="False" \
-s day="Sun" \
-s retraction_speed="40" \
-s jerk_support_interface="20" \
-s infill_line_width="0.4" \
-s support_fan_enable="False" \
-s retraction_extrusion_window="5" \
-s support_brim_line_count="20" \
-s infill_support_enabled="False" \
-s blackmagic="0" \
-s cool_fan_speed_0="0" \
-s travel_compensate_overlapping_walls_0_enabled="True" \
-s alternate_carve_order="True" \
-s machine_max_feedrate_y="500" \
-s min_skin_width_for_expansion="3.6739403974420595e-17" \
-s roofing_line_width="0.4" \
-s machine_firmware_retract="False" \
-s switch_extruder_retraction_speeds="20" \
-s raft_surface_layers="2" \
-s skirt_brim_minimal_length="250" \
-s switch_extruder_retraction_amount="16" \
-s machine_nozzle_temp_enabled="True" \
-s skirt_brim_speed="30.0" \
-s spaghetti_max_infill_angle="10" \
-s acceleration_support_interface="500" \
-s wall_0_wipe_dist="0.2" \
-s infill_overlap_mm="0.04" \
-s conical_overhang_angle="50" \
-s mesh_position_z="0" \
-s xy_offset="0" \
-s bottom_layers="4" \
-s material_flow_dependent_temperature="False" \
-s brim_replaces_support="True" \
-s support_tree_branch_diameter_angle="5" \
-s support_minimal_diameter="3.0" \
-s mold_width="5" \
-s adhesion_extruder_nr="0" \
-s acceleration_infill="500" \
-s travel_avoid_supports="False" \
-s raft_surface_line_spacing="0.4" \
-s wireframe_height="3" \
-s z_seam_relative="False" \
-s cross_support_density_image="" \
-s z_seam_x="117.5" \
-s retraction_combing_max_distance="0" \
-s draft_shield_height="10" \
-s speed_travel_layer_0="60.0" \
-s support_line_distance="2.6666666666666665" \
-s retraction_enable="True" \
-s wireframe_roof_fall_down="2" \
-s wireframe_strategy="compensate" \
-s machine_gcode_flavor="RepRap (Marlin/Sprinter)" \
-s speed_print="60" \
-s raft_interface_thickness="0.22499999999999998" \
-s spaghetti_flow="20" \
-s bridge_skin_speed_3="15.0" \
-s magic_fuzzy_skin_point_dist="0.8" \
-s filter_out_tiny_gaps="True" \
-s jerk_print="20" \
-s support_infill_sparse_thickness="0.15" \
-s material_bed_temperature_layer_0="60" \
-s support_interface_offset="0.0" \
-s support_tree_enable="False" \
-s acceleration_print_layer_0="500" \
-s meshfix="0" \
-s acceleration_skirt_brim="500" \
-s adaptive_layer_height_threshold="200.0" \
-s bridge_enable_more_layers="True" \
-s minimum_support_area="0.0" \
-s extruder_prime_pos_abs="False" \
-s material_adhesion_tendency="10" \
-s speed_topbottom="30" \
-s raft_smoothing="5" \
-s support_xy_distance_overhang="0.2" \
-s skin_preshrink="0.8" \
-s support_enable="False" \
-s wall_min_flow="0" \
-s ironing_flow="10.0" \
-s jerk_enabled="True" \
-s magic_fuzzy_skin_enabled="False" \
-s machine_steps_per_mm_e="1600" \
-s support_bottom_distance="0.1" \
-s wall_thickness="1" \
-s wireframe_fall_down="0.5" \
-s support_offset="0.2" \
-s material_flow="100" \
-s raft_interface_line_spacing="1.0" \
-s machine_nozzle_heat_up_speed="2.0" \
-s machine_heated_bed="True" \
-s machine_use_extruder_offset_to_offset_coords="True" \
-s machine_shape="rectangular" \
-s machine_heat_zone_length="16" \
-s support_bottom_line_width="0.4" \
-s switch_extruder_prime_speed="20" \
-s wall_x_extruder_nr="-1" \
-s retraction_hop_enabled="False" \
-s acceleration_roofing="500" \
-s switch_extruder_retraction_speed="20" \
-s meshfix_maximum_travel_resolution="0.02" \
-s support_extruder_nr_layer_0="0" \
-s adaptive_layer_height_variation="0.1" \
-s cross_infill_density_image="" \
-s infill_pattern="grid" \
-s connect_skin_polygons="False" \
-s travel="0" \
-s machine_nozzle_expansion_angle="45" \
-s machine_max_jerk_e="5.0" \
-s raft_margin="15" \
-s bottom_skin_expand_distance="0.8" \
-s minimum_polygon_circumference="1.0" \
-s wall_min_flow_retract="False" \
-s roofing_pattern="lines" \
-s cross_infill_pocket_size="8.0" \
-s wall_line_width_0="0.4" \
-s magic_mesh_surface_mode="normal" \
-s print_bed_temperature="60" \
-s raft_fan_speed="0" \
-s bottom_thickness="0.6" \
-s skin_overlap_mm="0.02" \
-s magic_fuzzy_skin_thickness="0.3" \
-s meshfix_extensive_stitching="False" \
-s infill_offset_y="0" \
-s jerk_ironing="20" \
-s support_bottom_enable="False" \
-s dual="0" \
-s cool_min_layer_time_fan_speed_max="10" \
-s machine_endstop_positive_direction_x="False" \
-s ooze_shield_angle="60" \
-s max_skin_angle_for_expansion="90" \
-s machine_endstop_positive_direction_y="False" \
-s wireframe_top_delay="0" \
-s gradual_infill_steps="0" \
-s machine_show_variants="False" \
-s retraction_prime_speed="40" \
-s z_seam_type="sharpest_corner" \
-s support_roof_extruder_nr="0" \
-s acceleration_enabled="True" \
-s retraction_hop="1" \
-s jerk_wall_0="20" \
-s adhesion_type="none" \
-s support_tower_roof_angle="65" \
-s extruder_prime_pos_z="0" \
-s skirt_gap="5" \
-s acceleration_prime_tower="500" \
-s jerk_prime_tower="20" \
-s skin_outline_count="1" \
-s jerk_travel="30" \
-s raft_surface_jerk="20" \
-s adaptive_layer_height_variation_step="0.01" \
-s support_conical_min_width="5.0" \
-s machine_acceleration="4000" \
-s support_tree_branch_diameter="2" \
-s machine_steps_per_mm_y="50" \
-s wireframe_printspeed="5" \
-s support_extruder_nr="0" \
-s support_tree_wall_thickness="0.4" \
-s mold_roof_height="0.5" \
-s jerk_roofing="20" \
-s acceleration_wall="500" \
-s ironing_enabled="False" \
-s acceleration_travel="5000" \
-s gradual_support_infill_steps="0" \
-s adaptive_layer_height_enabled="False" \
-s support_connect_zigzags="True" \
-s spaghetti_infill_extra_volume="0" \
-s bridge_skin_speed_2="15.0" \
-s speed_support="60" \
-s wireframe_roof_outer_delay="0.2" \
-s ironing_inset="0.2" \
-s bridge_fan_speed_3="0" \
-s prime_tower_flow="100" \
-s acceleration_ironing="500" \
-s support_mesh="False" \
-s support_roof_pattern="concentric" \
-s jerk_topbottom="20" \
-s remove_empty_first_layers="True" \
-s prime_tower_size="20" \
-s wireframe_roof_inset="3" \
-s jerk_print_layer_0="20" \
-s prime_blob_enable="False" \
-s meshfix_keep_open_polygons="False" \
-s material_extrusion_cool_down_speed="0.7" \
-s speed_support_bottom="40.0" \
-s bridge_skin_speed="15.0" \
-s support_bottom_stair_step_height="0.3" \
-s speed_roofing="30" \
-s support_interface_line_width="0.4" \
-s support_skip_zag_per_mm="20" \
-s speed_support_roof="40.0" \
-s infill_angles="[ ]" \
-s draft_shield_enabled="False" \
-s acceleration_support="500" \
-s support="0" \
-s infill_mesh_order="0" \
-s spaghetti_infill_enabled="False" \
-s print_temperature="210" \
-s jerk_layer_0="20" \
-s bridge_wall_min_length="5" \
-s prime_tower_position_x="232.775" \
-s experimental="0" \
-s support_skip_some_zags="False" \
-s support_line_width="0.4" \
-s ooze_shield_enabled="False" \
-s minimum_roof_area="1.0" \
-s prime_tower_circular="True" \
-s jerk_wall="20" \
-s speed_wall="30.0" \
-s support_xy_distance="0.7" \
-s skin_line_width="0.4" \
-s wall_extruder_nr="-1" \
-s raft_base_acceleration="500" \
-s travel_retract_before_outer_wall="False" \
-s machine_height="250" \
-s speed_travel="120" \
-s support_angle="50" \
-s raft_base_speed="22.5" \
-s layer_0_z_overlap="0.15" \
-s support_infill_extruder_nr="0" \
-s speed_prime_tower="60" \
-s coasting_speed="90" \
-s mold_angle="40" \
-s raft_speed="30.0" \
-s cool_fan_speed_min="100.0" \
-s support_brim_width="8.0" \
-s machine_nozzle_head_distance="3" \
-s smooth_spiralized_contours="True" \
-s top_bottom_extruder_nr="-1" \
-s machine_head_with_fans_polygon="[[-20, 10], [10, 10], [10, -10], [-20, -10]]" \
-s z_seam_corner="z_seam_corner_inner" \
-s acceleration_layer_0="500" \
-s retraction_min_travel="0.8" \
-s support_supported_skin_fan_speed="100" \
-s infill_wall_line_count="0" \
-s wireframe_straight_before_down="20" \
-s raft_base_line_width="0.8" \
-s mesh_position_x="0" \
-s prime_tower_position_y="212.775" \
-s wireframe_drag_along="0.6" \
-s meshfix_maximum_resolution="0.01" \
-s gradual_support_infill_step_height="1" \
-s infill_extruder_nr="-1" \
-s infill_sparse_density="10" \
-s date="09-06-2019" \
-s support_bottom_stair_step_width="5.0" \
-s platform_adhesion="0" \
-s support_tree_collision_resolution="0.2" \
-s raft_base_fan_speed="0" \
-s machine_max_acceleration_x="9000" \
-s bridge_skin_material_flow_2="100" \
-s support_interface_height="1" \
-s support_tree_branch_distance="1" \
-s top_bottom_pattern_0="lines" \
-s alternate_extra_perimeter="False" \
-s support_roof_enable="False" \
-s support_bottom_extruder_nr="0" \
-s machine_extruder_count="1" \
-s jerk_support_roof="20" \
-s minimum_bottom_area="1.0" \
-s infill_line_distance="8.0" \
-s infill_mesh="False" \
-s layer_height="0.15" \
-s draft_shield_height_limitation="full" \
-s wireframe_printspeed_flat="5" \
-s support_brim_enable="False" \
-s cool_fan_full_at_height="0.2" \
-s speed="0" \
-s retract_at_layer_change="False" \
-s raft_base_jerk="20" \
-s flow_rate_max_extrusion_offset="0" \
-s material_diameter="1.75" \
-s retraction_combing="all" \
-s material_flow_layer_0="100" \
-s initial_extruder_nr="0" \
-s coasting_volume="0.064" \
-s machine_endstop_positive_direction_z="True" \
-s default_material_bed_temperature="60" \
-s meshfix_union_all="True" \
-s support_z_distance="0.1" \
-s support_bottom_offset="0.0" \
-s bridge_wall_speed="20.0" \
-s sub_div_rad_add="0.4" \
-s bottom_skin_preshrink="0.8" \
-s cutting_mesh="False" \
-s machine_max_jerk_xy="20.0" \
-s wall_line_width_x="0.4" \
-s jerk_support="20" \
-s support_roof_line_distance="0.4" \
-s brim_line_count="20" \
-s material_guid="" \
-s infill_support_angle="40" \
-s material="0" \
-s material_bed_temp_prepend="True" \
-s infill_before_walls="True" \
-s machine_center_is_zero="False" \
-s top_thickness="0.6" \
-s wall_0_extruder_nr="-1" \
-s wireframe_flow_connection="100" \
-s material_print_temp_prepend="True" \
-s wireframe_printspeed_down="5" \
-s wall_0_inset="0" \
-s relative_extrusion="False" \
-s acceleration_wall_x="500" \
-s flow_rate_extrusion_offset_factor="100" \
-s carve_multiple_volumes="False" \
-s bridge_skin_support_threshold="50" \
-s support_roof_line_width="0.4" \
-s acceleration_support_infill="500" \
-s expand_skins_expand_distance="0.8" \
-s machine_filament_park_distance="16" \
-s support_zag_skip_count="8" \
-s fill_outline_gaps="False" \
-s gantry_height="30" \
-s material_surface_energy="100" \
-s raft_interface_line_width="0.8" \
-s infill_offset_x="0" \
-s skin_angles="[ ]" \
-s machine_steps_per_mm_z="50" \
-s top_layers="4" \
-s support_interface_extruder_nr="0" \
-s nozzle_disallowed_areas="[]" \
-s support_join_distance="2.0" \
-s machine_buildplate_type="glass" \
-s skin_alternate_rotation="False" \
-s time="14:43:09" \
-s prime_tower_enable="False" \
-s cool_fan_speed="100.0" \
-s raft_surface_thickness="0.15" \
-s acceleration_travel_layer_0="5000.0" \
-s machine_nozzle_id="unknown" \
-s coasting_min_volume="0.8" \
-s speed_slowdown_layers="2" \
-s default_material_print_temperature="210" \
-s wireframe_bottom_delay="0" \
-s infill_overlap="10" \
-s jerk_support_infill="20" \
-s wall_overhang_speed_factor="100" \
-s speed_ironing="20.0" \
-s limit_support_retractions="True" \
-s machine_max_acceleration_e="10000" \
-s line_width="0.4" \
-s machine_minimum_feedrate="0.0" \
-s optimize_wall_printing_order="False" \
-s material_bed_temp_wait="True" \
-s machine_depth="235" \
-s zig_zaggify_support="False" \
-s wall_overhang_angle="90" \
-s cool_fan_enabled="True" \
-s cool_fan_speed_max="100.0" \
-s jerk_support_bottom="20" \
-s wireframe_top_jump="0.6" \
-s top_bottom_thickness="0.6" \
-s speed_equalize_flow_max="150" \
-s magic_fuzzy_skin_point_density="1.25" \
-s wall_line_count="2" \
-s travel_compensate_overlapping_walls_enabled="True" \
-s raft_surface_fan_speed="0" \
-s machine_max_feedrate_e="299792458000" \
-s spaghetti_infill_stepped="True" \
-s raft_interface_acceleration="500" \
-s support_infill_rate="15" \
-s machine_max_feedrate_x="500" \
-s support_tree_angle="40" \
-s machine_max_jerk_z="0.4" \
-s cool_min_layer_time="3" \
-s anti_overhang_mesh="False" \
-s machine_steps_per_mm_x="50" \
-s machine_max_feedrate_z="5" \
-s support_roof_density="100" \
-s outer_inset_first="False" \
-s gradual_infill_step_height="1.5" \
-s cool_lift_head="False" \
-s speed_wall_0="40" \
-s material_standby_temperature="150" \
-s brim_outside_only="True" \
-s support_bottom_height="1" \
-s raft_acceleration="500" \
-s bridge_fan_speed_2="0" \
-s bridge_skin_material_flow_3="110" \
-s support_interface_pattern="concentric" \
-s machine_settings="0" \
-s acceleration_topbottom="500" \
-s speed_print_layer_0="30.0" \
-s wireframe_flow_flat="100" \
-s support_tree_wall_count="1" \
-s retraction_retract_speed="40" \
-s zig_zaggify_infill="False" \
-s max_feedrate_z_override="0" \
-s raft_base_thickness="0.24" \
-s machine_head_polygon="[[-30, 34], [-30, -32], [30, -32], [30, 34]]" \
-s extruders_enabled_count="1" \
-s raft_surface_speed="30.0" \
-s infill_enable_travel_optimization="False" \
-s speed_layer_0="30.0" \
-s material_print_temp_wait="True" \
-s support_top_distance="0.1" \
-s retraction_hop_after_extruder_switch="True" \
-s material_initial_print_temperature="200" \
-s resolution="0" \
-s wireframe_printspeed_up="5" \
-s xy_offset_layer_0="0" \
-s support_bottom_line_distance="0.4" \
-s extruder_prime_pos_x="0" \
-s layer_start_y="0.0" \
-s machine_nozzle_size="0.4" \
-s raft_interface_jerk="20" \
-s material_shrinkage_percentage="0" \
-s ironing_only_highest_layer="False" \
-s speed_support_infill="60" \
-s raft_base_line_spacing="1.6" \
-s material_print_temperature="210" \
-s travel_avoid_distance="0.625" \
-s raft_interface_speed="22.5" \
-s infill_multiplier="1" \
-s initial_layer_line_width_factor="100.0" \
-s machine_nozzle_tip_outer_diameter="1" \
-s support_xy_overrides_z="z_overrides_xy" \
-s min_infill_area="0" \
-s start_layers_at_same_position="False" \
-s center_object="False" \
-s cool_fan_full_layer="2" \
-s jerk_travel_layer_0="30.0" \
-s support_type="everywhere" \
-s mold_enabled="False" \
-s skirt_line_count="4" \
-s retraction_count_max="90" \
-s retraction_extra_prime_amount="0" \
-s prime_tower_wipe_enabled="True" \
-s fill_perimeter_gaps="everywhere" \
-s wireframe_nozzle_clearance="1" \
-s speed_infill="100" \
-s print_sequence="all_at_once" \
-s skin_overlap="5" \
-s bridge_wall_material_flow="50" \
-s support_interface_enable="False" \
-s bridge_skin_density_3="80" \
-s cooling="0" \
-s wall_line_width="0.4" \
-s acceleration_support_roof="500" \
-s support_roof_offset="0.0" \
-s wireframe_up_half_speed="0.3" \
-s raft_surface_acceleration="500" \
-s support_infill_angle="0" \
-s support_roof_height="1" \
-s magic_spiralize="False" \
-s retraction_hop_only_when_collides="False" \
-s machine_feeder_wheel_diameter="10.0" \
-s material_flow_temp_graph="[[3.5,200],[7.0,240]]" \
-s draft_shield_dist="10" \
-s layer_start_x="0.0" \
-s machine_min_cool_heat_time_window="50.0" \
-s acceleration_print="500" \
-s support_bottom_pattern="concentric" -e0 \
-s conical_overhang_enabled="False" \
-s bridge_fan_speed="100" \
-s jerk_skirt_brim="20" \
-s resolution="0" \
-s cool_min_speed="10" \
-s retraction_amount="5" \
-s jerk_wall_x="20" \
-s support_interface_density="100" \
-s bridge_skin_density="100" \
-s speed_support_interface="40.0" \
-s raft_airgap="0.3" \
-s bridge_wall_coast="100" \
-s acceleration_wall_0="500" \
-s z_seam_y="705" \
-s prime_tower_min_volume="6" \
-s brim_line_count="20" \
-s support_roof_line_distance="0.4" \
-s prime_tower_line_width="0.4" \
-s command_line_settings="0" \
-s wall_overhang_speed_factor="100" \
-s jerk_support_infill="20" \
-s raft_interface_speed="22.5" \
-s travel_avoid_distance="0.625" \
-s machine_steps_per_mm_y="50" \
-s support_tree_branch_diameter="2" \
-s raft_base_line_spacing="1.6" \
-s speed_support_infill="60" \
-s support_use_towers="True" \
-s skin_no_small_gaps_heuristic="False" \
-s raft_base_fan_speed="0" \
-s support_tree_collision_resolution="0.2" \
-s machine_nozzle_heat_up_speed="2.0" \
-s raft_interface_line_spacing="1.0" \
-s coasting_enable="False" \
-s extruder_prime_pos_y="0" \
-s bridge_skin_density_2="75" \
-s machine_extruder_start_pos_x="0" \
-s support_tower_diameter="3.0" \
-s machine_extruder_start_code="" \
-s connect_infill_polygons="False" \
-s retraction_combing_max_distance="0" \
-s z_seam_x="117.5" \
-s infill_line_distance="8.0" \
-s minimum_bottom_area="1.0" \
-s ironing_line_spacing="0.1" \
-s support_wall_count="0" \
-s mesh_rotation_matrix="[[1,0,0], [0,1,0], [0,0,1]]" \
-s mesh_position_y="0" \
-s machine_nozzle_temp_enabled="True" \
-s skirt_brim_speed="30.0" \
-s switch_extruder_retraction_amount="16" \
-s conical_overhang_angle="50" \
-s mesh_position_z="0" \
-s infill_overlap_mm="0.04" \
-s jerk_infill="20" \
-s bridge_skin_density_3="80" \
-s support_interface_enable="False" \
-s min_infill_area="0" \
-s support_xy_overrides_z="z_overrides_xy" \
-s machine_nozzle_tip_outer_diameter="1" \
-s support_pattern="zigzag" \
-s multiple_mesh_overlap="0.15" \
-s machine_nozzle_id="unknown" \
-s acceleration_travel_layer_0="5000.0" \
-s support_tree_angle="40" \
-s spaghetti_inset="0.2" \
-s infill_wipe_dist="0.1" \
-s meshfix_maximum_travel_resolution="0.02" \
-s acceleration_skirt_brim="500" \
-s meshfix="0" \
-s brim_width="8.0" \
-s wall_0_inset="0" \
-s machine_nozzle_offset_x="0" \
-s support_tree_wall_count="1" \
-s speed_print_layer_0="30.0" \
-s raft_jerk="20" \
-s support_bottom_density="100" \
-s acceleration_wall_x="500" \
-s cool_fan_enabled="True" \
-s cool_fan_speed_max="100.0" \
-s wall_overhang_angle="90" \
-s retraction_speed="40" \
-s shell="0" \
-s machine_extruder_start_pos_y="0" \
-s support_fan_enable="False" \
-s retraction_extrusion_window="5" \
-s support_brim_line_count="20" \
-s infill_support_enabled="False" \
-s blackmagic="0" \
-s cool_fan_speed_0="0" \
-s travel_compensate_overlapping_walls_0_enabled="True" \
-s min_skin_width_for_expansion="3.6739403974420595e-17" \
-s z_seam_relative="False" \
-s cross_support_density_image="" \
-s support_interface_pattern="concentric" \
-s bridge_skin_material_flow_3="110" \
-s bridge_fan_speed_2="0" \
-s roofing_line_width="0.4" \
-s switch_extruder_retraction_speeds="20" \
-s raft_surface_layers="2" \
-s skirt_brim_minimal_length="250" \
-s spaghetti_max_infill_angle="10" \
-s acceleration_support_interface="500" \
-s wall_0_wipe_dist="0.2" \
-s xy_offset="0" \
-s bottom_layers="4" \
-s material_flow_dependent_temperature="False" \
-s support_roof_pattern="concentric" \
-s gradual_infill_steps="0" \
-s brim_replaces_support="True" \
-s support_tree_branch_diameter_angle="5" \
-s support_minimal_diameter="3.0" \
-s acceleration_infill="500" \
-s travel_avoid_supports="False" \
-s ironing_enabled="False" \
-s acceleration_travel="5000" \
-s acceleration_wall="500" \
-s support_join_distance="2.0" \
-s raft_surface_line_spacing="0.4" \
-s speed_travel_layer_0="60.0" \
-s support_line_distance="2.6666666666666665" \
-s retraction_enable="True" \
-s speed_print="60" \
-s raft_interface_thickness="0.22499999999999998" \
-s initial_layer_line_width_factor="100.0" \
-s infill_line_width="0.4" \
-s jerk_wall_0="20" \
-s retraction_hop="1" \
-s bridge_skin_speed_3="15.0" \
-s spaghetti_flow="20" \
-s magic_fuzzy_skin_point_dist="0.8" \
-s filter_out_tiny_gaps="True" \
-s jerk_print="20" \
-s travel_avoid_other_parts="True" \
-s support_bottom_distance="0.1" \
-s wall_thickness="1" \
-s machine_steps_per_mm_e="1600" \
-s acceleration_print_layer_0="500" \
-s support_interface_offset="0.0" \
-s raft_base_acceleration="500" \
-s bridge_enable_more_layers="True" \
-s minimum_support_area="0.0" \
-s infill_sparse_thickness="0.15" \
-s extruder_prime_pos_abs="False" \
-s material_adhesion_tendency="0" \
-s speed_topbottom="30" \
-s raft_smoothing="5" \
-s support_xy_distance_overhang="0.2" \
-s skin_preshrink="0.8" \
-s ironing_flow="10.0" \
-s magic_fuzzy_skin_enabled="False" \
-s support_offset="0.2" \
-s material_flow="100" \
-s machine_extruder_end_pos_y="0" \
-s slicing_tolerance="middle" \
-s machine_heat_zone_length="16" \
-s support_bottom_line_width="0.4" \
-s top_skin_preshrink="0.8" \
-s retraction_hop_enabled="False" \
-s acceleration_roofing="500" \
-s switch_extruder_retraction_speed="20" \
-s cross_infill_density_image="" \
-s infill_pattern="grid" \
-s connect_skin_polygons="False" \
-s travel="0" \
-s wall_line_width_0="0.4" \
-s cross_infill_pocket_size="8.0" \
-s raft_margin="15" \
-s bottom_skin_expand_distance="0.8" \
-s infill_overlap="10" \
-s extruder_nr="0" \
-s roofing_pattern="lines" \
-s meshfix_union_all_remove_holes="False" \
-s material_diameter="1.75" \
-s material_flow_layer_0="100" \
-s support_conical_enabled="False" \
-s magic_fuzzy_skin_thickness="0.3" \
-s meshfix_extensive_stitching="False" \
-s infill_offset_y="0" \
-s max_skin_angle_for_expansion="90" \
-s material_initial_print_temperature="190" \
-s spaghetti_infill_extra_volume="0" \
-s support_connect_zigzags="True" \
-s xy_offset_layer_0="0" \
-s raft_base_line_width="0.8" \
-s machine_nozzle_offset_y="0" \
-s raft_surface_fan_speed="0" \
-s raft_interface_acceleration="500" \
-s spaghetti_infill_stepped="True" \
-s jerk_prime_tower="20" \
-s skin_outline_count="1" \
-s support_tower_roof_angle="65" \
-s extruder_prime_pos_z="0" \
-s skirt_gap="5" \
-s acceleration_prime_tower="500" \
-s infill_multiplier="1" \
-s skin_alternate_rotation="False" \
-s support_conical_min_width="5.0" \
-s support_infill_angle="0" \
-s raft_surface_acceleration="500" \
-s infill="0" \
-s speed_prime_tower="60" \
-s coasting_speed="90" \
-s gradual_support_infill_steps="0" \
-s material_guid="0ff92885-617b-4144-a03c-9989872454bc" \
-s bridge_skin_speed_2="15.0" \
-s mesh_position_x="0" \
-s expand_skins_expand_distance="0.8" \
-s machine_steps_per_mm_x="50" \
-s jerk_print_layer_0="20" \
-s magic_mesh_surface_mode="normal" \
-s raft_fan_speed="0" \
-s material_surface_energy="100" \
-s raft_interface_line_width="0.8" \
-s infill_offset_x="0" \
-s skin_line_width="0.4" \
-s prime_blob_enable="False" \
-s meshfix_keep_open_polygons="False" \
-s material_extrusion_cool_down_speed="0.7" \
-s speed_support_bottom="40.0" \
-s machine_nozzle_cool_down_speed="2.0" \
-s bridge_skin_speed="15.0" \
-s machine_extruder_end_pos_x="0" \
-s brim_outside_only="True" \
-s material_standby_temperature="175" \
-s support_bottom_stair_step_height="0.3" \
-s speed_roofing="30" \
-s support_interface_line_width="0.4" \
-s support_skip_zag_per_mm="20" \
-s speed_support_roof="40.0" \
-s retraction_extra_prime_amount="0" \
-s bridge_skin_material_flow="60" \
-s material_print_temperature="200" \
-s bridge_fan_speed_3="0" \
-s ironing_inset="0.2" \
-s machine_extruder_end_pos_abs="False" \
-s acceleration_support="500" \
-s support="0" \
-s spaghetti_infill_enabled="False" \
-s jerk_layer_0="20" \
-s experimental="0" \
-s minimum_interface_area="1.0" \
-s infill_angles="[ ]" \
-s machine_nozzle_size="0.4" \
-s raft_interface_jerk="20" \
-s material_shrinkage_percentage="0" \
-s machine_extruder_cooling_fan_number="0" \
-s minimum_roof_area="1.0" \
-s dual="0" \
-s support_bottom_enable="False" \
-s jerk_wall="20" \
-s jerk_support_roof="20" \
-s machine_endstop_positive_direction_y="False" \
-s speed_wall="30.0" \
-s support_xy_distance="0.7" \
-s support_skip_some_zags="False" \
-s ironing_pattern="zigzag" \
-s speed_travel="120" \
-s support_angle="50" \
-s raft_base_speed="22.5" \
-s layer_0_z_overlap="0.15" \
-s mold_angle="40" \
-s raft_speed="30.0" \
-s cool_fan_speed_min="100.0" \
-s raft_surface_line_width="0.4" \
-s support_brim_width="8.0" \
-s machine_nozzle_head_distance="3" \
-s top_skin_expand_distance="0.8" \
-s acceleration_ironing="500" \
-s prime_tower_flow="100" \
-s acceleration_support_bottom="500" \
-s speed_support="60" \
-s jerk_support_interface="20" \
-s infill_sparse_density="10" \
-s cool_min_layer_time="3" \
-s optimize_wall_printing_order="False" \
-s line_width="0.4" \
-s acceleration_support_roof="500" \
-s support_roof_offset="0.0" \
-s jerk_roofing="20" \
-s acceleration_layer_0="500" \
-s retraction_min_travel="0.8" \
-s support_supported_skin_fan_speed="100" \
-s infill_wall_line_count="0" \
-s support_line_width="0.4" \
-s cooling="0" \
-s support_bottom_stair_step_width="5.0" \
-s platform_adhesion="0" \
-s material_print_temperature_layer_0="200" \
-s bridge_skin_material_flow_2="100" \
-s top_bottom_pattern_0="lines" \
-s alternate_extra_perimeter="False" \
-s support_roof_enable="False" \
-s bridge_wall_material_flow="50" \
-s speed_infill="100" \
-s skin_overlap="5" \
-s support_bottom_height="1" \
-s raft_acceleration="500" \
-s support_z_distance="0.1" \
-s meshfix_union_all="True" \
-s material="0" \
-s infill_before_walls="True" \
-s support_conical_angle="30" \
-s machine_extruder_end_code="" \
-s raft_surface_speed="30.0" \
-s infill_enable_travel_optimization="False" \
-s speed_layer_0="30.0" \
-s cool_fan_speed="100.0" \
-s raft_surface_thickness="0.15" \
-s coasting_min_volume="0.8" \
-s coasting_volume="0.064" \
-s machine_endstop_positive_direction_z="True" \
-s support_initial_layer_line_distance="2.6666666666666665" \
-s support_bottom_offset="0.0" \
-s bridge_wall_speed="20.0" \
-s sub_div_rad_add="0.4" \
-s bottom_skin_preshrink="0.8" \
-s machine_min_cool_heat_time_window="50.0" \
-s layer_start_x="0.0" \
-s wall_line_width_x="0.4" \
-s jerk_support="20" \
-s raft_surface_jerk="20" \
-s infill_support_angle="40" \
-s top_thickness="0.6" \
-s bridge_skin_support_threshold="50" \
-s support_roof_line_width="0.4" \
-s acceleration_support_infill="500" \
-s speed_wall_x="80" \
-s raft_base_jerk="20" \
-s retract_at_layer_change="False" \
-s support_tree_wall_thickness="0.4" \
-s mold_roof_height="0.5" \
-s machine_filament_park_distance="16" \
-s support_zag_skip_count="8" \
-s fill_outline_gaps="False" \
-s skin_angles="[ ]" \
-s machine_steps_per_mm_z="50" \
-s top_layers="4" \
-s machine_extruder_start_pos_abs="False" \
-s prime_tower_wipe_enabled="True" \
-s fill_perimeter_gaps="everywhere" \
-s gradual_support_infill_step_height="1" \
-s meshfix_maximum_resolution="0.01" \
-s magic_fuzzy_skin_point_density="1.25" \
-s wall_line_count="2" \
-s speed_equalize_flow_enabled="False" \
-s support_infill_rate="15" \
-s travel_compensate_overlapping_walls_enabled="True" \
-s speed_equalize_flow_max="150" \
-s z_seam_corner="z_seam_corner_inner" \
-s bottom_thickness="0.6" \
-s skin_overlap_mm="0.02" \
-s retraction_hop_only_when_collides="False" \
-s machine_feeder_wheel_diameter="10.0" \
-s outer_inset_first="False" \
-s gradual_infill_step_height="1.5" \
-s cool_lift_head="False" \
-s speed_wall_0="40" \
-s extruder_prime_pos_x="0" \
-s layer_start_y="0.0" \
-s switch_extruder_prime_speed="20" \
-s roofing_layer_count="0" \
-s default_material_print_temperature="200" \
-s machine_endstop_positive_direction_x="False" \
-s material_final_print_temperature="185" \
-s speed="0" \
-s jerk_travel="30" \
-s machine_settings="0" \
-s acceleration_topbottom="500" \
-s raft_interface_fan_speed="0" \
-s jerk_topbottom="20" \
-s z_seam_type="sharpest_corner" \
-s retraction_prime_speed="40" \
-s wall_line_width="0.4" \
-s retraction_retract_speed="40" \
-s zig_zaggify_infill="False" \
-s support_interface_height="1" \
-s raft_base_thickness="0.24" \
-s max_feedrate_z_override="0" \
-s zig_zaggify_support="False" \
-s support_bottom_line_distance="0.4" \
-s travel_compensate_overlapping_walls_x_enabled="True" \
-s acceleration_print="500" \
-s support_bottom_pattern="concentric" \
-s support_infill_sparse_thickness="0.15" \
-s support_roof_height="1" \
-s jerk_travel_layer_0="30.0" \
-s mold_enabled="False" \
-s skirt_line_count="4" \
-s retraction_count_max="90" \
-s ironing_only_highest_layer="False" \
-s speed_ironing="20.0" \
-s limit_support_retractions="True" \
-s support_interface_skip_height="0.3" \
-s mold_width="5" \
-s cool_min_layer_time_fan_speed_max="10" \
-s skirt_brim_line_width="0.4" \
-s top_bottom_pattern="lines" \
-s center_object="False" \
-s cool_fan_full_layer="2" \
-s support_tree_branch_distance="1" \
-s material_flow_temp_graph="[[3.5,200],[7.0,240]]" \
-s support_top_distance="0.1" \
-s retraction_hop_after_extruder_switch="True" \
-s roofing_angles="[ ]" \
-s jerk_ironing="20" \
-s top_bottom_thickness="0.6" \
-s support_brim_enable="False" \
-s cool_fan_full_at_height="0.2" \
-s spaghetti_max_height="2.0" \
-s support_roof_density="100" \
-s jerk_support_bottom="20" \
-s skin_no_small_gaps_heuristic="False" -g -e0 -l $f \
-s extruder_nr="0" -o $f.gcode

rm $f
done

#fixup ending
for f in *.gcode
do
    sedi '/M104 S0/d' $f
    sedi '/M140 S0/d' $f
done

cd ..
openscad -o "./bed_leveling/all.stl" -D col=true -D row=true bed_leveling.scad
